<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>API Playground</title>
  <style>
    body{font-family:Segoe UI, Arial; margin:24px;}
    code, pre{background:#f5f5f5; padding:10px; border-radius:6px; display:block;}
    .row{display:flex; gap:24px; align-items:flex-start;}
    .col{flex:1;}
    input{padding:10px; width:100%; max-width:420px;}
    button{padding:10px 14px; margin-left:8px;}
    ul{padding-left:18px;}
  </style>
</head>
<body>
  <h1>API Playground</h1>

  <h2>GET endpoints</h2>
  <ul>
    <li><a href="/api/search-locations/?q=british" target="_blank">/api/search-locations/?q=british</a></li>
  </ul>

  <h2>Search locations (GET)</h2>
  <div>
    <input id="q" placeholder="type e.g. british / birtish" />
    <button onclick="doSearch()">Search</button>
  </div>

  <div class="row" style="margin-top:18px;">
    <div class="col">
      <h3>Response JSON</h3>
      <pre id="out">[]</pre>
    </div>

    <div class="col">
      <h3>Auto-check list (demo)</h3>
      <ul>
        <li><label><input type="checkbox" class="loc" value="1"> Buckingham Palace (id=1)</label></li>
        <li><label><input type="checkbox" class="loc" value="2"> British Museum (id=2)</label></li>
        <li><label><input type="checkbox" class="loc" value="3"> Natural History Museum (id=3)</label></li>
      </ul>
    </div>
  </div>

<script>
async function doSearch(){
  const val = document.getElementById("q").value.trim();
  if(val.length < 2) return;

  const r = await fetch(`/api/search-locations/?q=${encodeURIComponent(val)}`);
  const data = await r.json();
  document.getElementById("out").textContent = JSON.stringify(data, null, 2);

  const ids = new Set(data.map(x => String(x.id)));
  document.querySelectorAll(".loc").forEach(cb => {
    if(ids.has(String(cb.value))) cb.checked = true;
  });
}
</script>
</body>
</html>
